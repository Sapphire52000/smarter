**firebase_data_structure.md**

# ğŸ“¦ Firebase ë°ì´í„° êµ¬ì¡° ì„¤ê³„

> ì´ ë¬¸ì„œëŠ” ìŠ¤ë§ˆíŠ¸ íƒêµ¬ì¥ ì‹œìŠ¤í…œ(Pingtelligent)ì—ì„œ ì‚¬ìš©í•˜ëŠ” Firebase ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì‹¤ì‹œê°„ ì²˜ë¦¬ì—ëŠ” **Realtime Database**, ê¸°ë¡ ì €ì¥ ë° ì¿¼ë¦¬ì—ëŠ” **Cloud Firestore**ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## ğŸ”¥ 1. Firestore êµ¬ì¡° (ê¸°ë¡ìš©)

### âœ… 1.1 ì¶œì„ ê¸°ë¡ - `attendance`
```json
attendance (collection)
â”œâ”€â”€ student_id (document)
    â”œâ”€â”€ name: string
    â”œâ”€â”€ photo_url: string
    â”œâ”€â”€ total_attendance: number
    â”œâ”€â”€ dates: {
         "2025-03-20": true,
         "2025-03-21": false
       }
```
- âœ… ì¶œì„ ì—¬ë¶€ëŠ” ë‚ ì§œ í‚¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ boolean ì €ì¥
- âœ… `total_attendance`ëŠ” ìë™ ê³„ì‚°ìš© (ì•±ì—ì„œ ì°¸ê³ )

---

### âœ… 1.2 ì‹œê°„í‘œ - `schedules`
```json
schedules (collection)
â”œâ”€â”€ coach_id (document)
    â”œâ”€â”€ name: string
    â”œâ”€â”€ schedule: [
         {
           "date": "2025-03-22",
           "time": "14:00",
           "student": "ê¹€ì² ìˆ˜"
         },
         ...
       ]
```
- âœ… ì½”ì¹˜ë³„ ìŠ¤ì¼€ì¤„ ê´€ë¦¬
- âœ… GPTê°€ ë©”ì‹œì§€ë¥¼ ë¶„ì„í•´ ì´ ì»¬ë ‰ì…˜ì— ìë™ ë°˜ì˜í•¨

---

### âœ… 1.3 ê²½ê¸° ê¸°ë¡ - `matches`
```json
matches (collection)
â”œâ”€â”€ match_id (document)
    â”œâ”€â”€ table_id: string
    â”œâ”€â”€ players: { player1: string, player2: string }
    â”œâ”€â”€ score: { player1: number, player2: number }
    â”œâ”€â”€ winner: string
    â”œâ”€â”€ timestamp: string (ISO8601)
```
- âœ… ê²½ê¸° ì¢…ë£Œ ì‹œ ìë™ ì €ì¥
- âœ… ê²½ê¸°ë³„ ë¶„ì„ ì—°ë™ì„ ìœ„í•´ `match_id` ê¸°ì¤€

---

### âœ… 1.4 AI ë¶„ì„ ë°ì´í„° - `ai_analysis`
```json
ai_analysis (collection)
â”œâ”€â”€ match_id (document)
    â”œâ”€â”€ player1: string
    â”œâ”€â”€ player2: string
    â”œâ”€â”€ ball_speeds: [
         { "time": "00:01", "speed": 5.2 },
         ...
       ]
    â”œâ”€â”€ hit_locations: [
         { "player": "ê¹€ì² ìˆ˜", "x": 120, "y": 80 },
         ...
       ]
```
- âœ… ê³µì˜ ì†ë„ ë° ì¶©ëŒ ìœ„ì¹˜ ë°ì´í„° ì €ì¥
- âœ… ë‚˜ì¤‘ì— ë¶„ì„ìš© ì°¨íŠ¸ë‚˜ AI í”¼ë“œë°±ì— ì‚¬ìš©

---

## âš¡ 2. Realtime Database êµ¬ì¡° (ì‹¤ì‹œê°„ìš©)

### âœ… 2.1 ì‹¤ì‹œê°„ ê²½ê¸° ì ìˆ˜íŒ - `live_matches`
```json
live_matches
â”œâ”€â”€ table_1
    â”œâ”€â”€ player1: "ê¹€ì² ìˆ˜"
    â”œâ”€â”€ player2: "ë°•ì˜í¬"
    â”œâ”€â”€ score1: 7
    â”œâ”€â”€ score2: 9
    â”œâ”€â”€ status: "in_progress"  // or "finished"
```
- âœ… ì ìˆ˜íŒ ë²„íŠ¼ or AI ì‹¬íŒ â†’ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- âœ… Flutter ì•± & LED ì ìˆ˜íŒê³¼ ë™ê¸°í™”ë¨

---

## ğŸ§  3. ìœ ì—°ì„± ê³ ë ¤ì‚¬í•­ (ë°ì´í„° êµ¬ì¡° ë³€ê²½ ëŒ€ì‘)
- ëª¨ë“  í•„ë“œëŠ” optionalë¡œ ì²˜ë¦¬ (`null` í—ˆìš©)
- `Map<String, dynamic>` êµ¬ì¡°ë¡œ ìœ ì—°í•˜ê²Œ ë°›ë„ë¡ ì„¤ê³„
- êµ¬ì¡° ë³€ê²½ ì‹œì—ë„ ì•±ì´ í„°ì§€ì§€ ì•Šë„ë¡ ê¸°ë³¸ê°’ ì§€ì • í•„ìˆ˜
- ViewModel ë‚´ ê¸°ë³¸ê°’ ì²˜ë¦¬ ë° null-safe ë¡œì§ ê°•ì œ ì ìš©

---

## ğŸ“Œ ì°¸ê³  ì‚¬í•­
- ì¶œì„ ê¸°ë¡ì€ Firestore ê¸°ì¤€ì´ë©°, ì‹¤ì‹œê°„ í™•ì¸ì€ ì•±ì—ì„œ ìºì‹± ì²˜ë¦¬ ê°€ëŠ¥
- ì‹¤ì‹œê°„ ì ìˆ˜íŒì€ ë¹ ë¥´ê²Œ Firebase Realtime DBì— ë°˜ì˜ë˜ì–´ì•¼ í•¨
- AI ë¶„ì„ ê²°ê³¼ëŠ” ë¹„ë™ê¸° ì €ì¥ë˜ë¯€ë¡œ ì•± UIì— ë¶„ì„ ì¤€ë¹„ ì™„ë£Œ ì—¬ë¶€ í‘œì‹œ í•„ìš”

---

âœ… ì´ ë°ì´í„° êµ¬ì¡°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ Flutter MVVM ì•±ê³¼ Flask API, ë¼ì¦ˆë² ë¦¬íŒŒì´ ì—°ë™ êµ¬ì¡°ê°€ í†µì¼ë©ë‹ˆë‹¤. ì´í›„ êµ¬ì¡°ê°€ ë³€ê²½ë˜ë©´ ë°˜ë“œì‹œ ì´ ë¬¸ì„œë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤.

