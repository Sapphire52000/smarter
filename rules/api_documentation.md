# ğŸ”Œ api_documentation.md

## ğŸ§­ Flask API ëª…ì„¸ì„œ (for Pingtelligent)
ë³¸ ë¬¸ì„œëŠ” Flutter ì•± ë˜ëŠ” ë¼ì¦ˆë² ë¦¬íŒŒì´ ì¥ë¹„ê°€ í˜¸ì¶œí•  Flask APIì˜ ëª…ì„¸ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤. AI ë¶„ì„, ì–¼êµ´ ì¸ì‹, ìë™ ì‹¬íŒ ë“±ì˜ ê¸°ëŠ¥ì€ ëª¨ë‘ Flask ì„œë²„ì—ì„œ ì²˜ë¦¬ë˜ë©°, ëª¨ë“  ì‘ë‹µì€ JSON í˜•ì‹ì…ë‹ˆë‹¤.

---

## âœ… ê³µí†µ ì‚¬í•­
- Base URL: `http://<SERVER_IP>:5000`
- Request/Response: `application/json`
- ì¸ì¦: í˜„ì¬ ì—†ìŒ (ì¶”í›„ Firebase í† í° ê²€ì¦ ì¶”ê°€ ê°€ëŠ¥)

---

## ğŸ§  1. ì–¼êµ´ ì¸ì‹ API
### POST `/api/recognize-face`
**ì„¤ëª…:** ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ë©´ ì–¼êµ´ì„ ì¸ì‹í•˜ì—¬ í•´ë‹¹ í•™ìƒ IDë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

#### ğŸ“¥ Request Body:
```json
{
  "image_url": "https://..."
}
```

#### ğŸ“¤ Response:
```json
{
  "status": "success",
  "student_id": "abc123",
  "name": "ê¹€ì² ìˆ˜",
  "confidence": 0.98
}
```

---

## ğŸ“ 2. ê²½ê¸° ë¶„ì„ API (ê³µ ì›€ì§ì„)
### POST `/api/analyze-match`
**ì„¤ëª…:** ê²½ê¸° ì˜ìƒì„ ë¶„ì„í•˜ì—¬ ê³µì˜ ì†ë„ ë° ì¶©ëŒ ìœ„ì¹˜ ë“± AI ë¶„ì„ ë°ì´í„°ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

#### ğŸ“¥ Request Body:
```json
{
  "video_url": "https://...",
  "match_id": "match_20250320_001"
}
```

#### ğŸ“¤ Response:
```json
{
  "status": "done",
  "ball_speeds": [
    { "time": "00:01", "speed": 5.2 },
    { "time": "00:05", "speed": 6.1 }
  ],
  "hit_locations": [
    { "player": "ê¹€ì² ìˆ˜", "x": 120, "y": 80 },
    { "player": "ë°•ì˜í¬", "x": 140, "y": 60 }
  ]
}
```

---

## ğŸ¯ 3. ìë™ ì‹¬íŒ API
### POST `/api/auto-score`
**ì„¤ëª…:** ì‹¤ì‹œê°„ ê²½ê¸° ì¤‘ ê³µì˜ ê¶¤ì , ì¶©ëŒ ë“±ì„ ë¶„ì„í•˜ì—¬ ìë™ìœ¼ë¡œ ì ìˆ˜ë¥¼ íŒì •í•©ë‹ˆë‹¤.

#### ğŸ“¥ Request Body:
```json
{
  "frame_data": [ ... ],
  "sensor_data": [ ... ],
  "table_id": "table_1"
}
```

#### ğŸ“¤ Response:
```json
{
  "status": "scored",
  "point": "player1",
  "reason": "edge detected from sensor + ball went out"
}
```

---

## âš™ï¸ 4. í—¬ìŠ¤ ì²´í¬ (ì„œë²„ ìƒíƒœ í™•ì¸)
### GET `/api/health`
**ì„¤ëª…:** ì„œë²„ê°€ ì •ìƒ ì‘ë™ ì¤‘ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.

#### ğŸ“¤ Response:
```json
{
  "status": "ok"
}
```

---

## ğŸ“Œ ì°¸ê³ ì‚¬í•­
- ëª¨ë“  API í˜¸ì¶œì€ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬ë˜ë©°, Flutterì˜ `http` íŒ¨í‚¤ì§€ë¥¼ í†µí•´ ì‚¬ìš© ê°€ëŠ¥
- ì˜ˆì™¸ ìƒí™© ë°œìƒ ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ í˜•ì‹ì„ ë°˜í™˜:
```json
{
  "status": "error",
  "message": "ì–¼êµ´ì„ ì¸ì‹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
}
```

âœ… ì´ ë¬¸ì„œëŠ” Flask ì„œë²„ ë˜ëŠ” API Mock ì„œë²„ë¥¼ ë§Œë“¤ ë•Œ ê¸°ì¤€ì´ ë˜ëŠ” ëª…ì„¸ì„œì…ë‹ˆë‹¤. ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ë©´ ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.

